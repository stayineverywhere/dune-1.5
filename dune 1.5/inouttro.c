#include "dune.h"

#define SCROLL_HEIGHT 24

// Intro와 Outtro를 출력합니다. 다음 웹에서 이미지를 텍스트로 변환하여 사용하였습니다.
// https://toolinone.com/image-ascii/

void show_image(char image[][75], int image_h, int image_w)
{
    int cx = (screenSize.X - image_w) / 2;
    int row = image_h >= SCROLL_HEIGHT ? SCROLL_HEIGHT : image_h;
    int cy = (screenSize.Y - row) / 2;
    int sy = 0;

    WORD wAttr = _getTextAttribute();
    for (int k = 0; k < image_h - row + 1; k += 3) {
        for (int i = 0; i < row; i++) {
            sy = k + i;;
            for (int j = 0; j < image_w && image[k][j] != '\0'; j++) {
                if (image[sy][j] == '.')
                    setTextAttribute(FG_BLUE | BG_BLUE);
                putCharXY(cx + j, cy + i, image[sy][j]);
                setTextAttribute(wAttr);
            }
        }
        if (k == 0) Sleep(500);
        else Sleep(10);
        flushBuffer();
    }

    setTextAttribute(FG_BLACK | BG_YELLOW);
    putStringXY(cx + 13, cy + 25, "Programmed by 윤주영(JooYoung Yun), 학번: 20232532");
    setTextAttribute(wAttr);
    flushBuffer();

}
void Intro()
{
    char intro[][75] = {
"***************************************************************************",
"***************************************************************************",
"***************************************************************************",
"**********........+*******.....****+....:=...+*****.....*............-*****",
"**********..........-*****.....****+....:=......***.....*............-*****",
"**********............****.....****=....:=........*.....*............-*****",
"**********.............***.....****+....:=..............*............-*****",
"**********.....**#......=*.....****+....:=..............*.....*************",
"**********.....****......*.....****+....:=....*.........*.....*************",
"**********.....*****.....#.....****+....:=....***.......*.....*************",
"**********.....*****-....=.....****+....:=....****......*..........********",
"**********.....*****=....=.....****+....:=....****-.....*..........********",
"**********.....*****:....=.....****+....:=....*****.....*..........********",
"**********.....*****.....+.....****+....:=....*****.....*.....++***********",
"**********.....****:.....*.....****=....:=....*****.....*.....*************",
"**********.....***......=*-....-***.....==....*****.....*.....*************",
"**********.....:........**=.....:=:.....*=....*****.....*.....:::::::=*****",
"**********.............****.............*=....*****.....*............-*****",
"**********...........*******-.........+**=....*****.....*............-*****",
"**********........=**********+.......****=....*****.....*............-*****",
"********************************===***********************************+****",
"******************************+******=**+++*+*****+++*+++*+++++++++++++++++",
"************************+****++**++*#***+**+#*++++++++++*++++++++++++++++++",
"*****************************+++*+**=*#+**+++*+++*+++++++++++++++++++++++++",
"*****************************+*+*##*=*+++++#*=++*+**+++++++++++++++++++++++",
"**************************++*+***=**##******+++*+=*+=+=++++++++++++++++++++",
"*****************##****++*+++###########****+***+**=++++=++++++++++++++++++",
"**********#%#%%**%***+++++##########%##**%##%=%*#-+##*++++=++++++++++++++++",
"*******#*****#*******++++####*%##%**#####**+#*#%###+%*#**++++++++++++++++++",
"***************##*****++##%*#%#%%#*%%%#%######*#*####+##+++=+++++++++++++++",
"****************#****+++##*#%@#%##%%%%%%%%%%%##***=#=*#+**++==+++++++++++++",
"****************+++++++**%*#*%%##%%%%%%#%########%***++=+=#=+==+++++++++++=",
"***********+***+*++++++#%*#%%%%%%%%%%%@%#%%######*##***++**+*==++++++++++==",
"*********++++++++++++++###%%%%@%%%%%%%%%%%######***%#***=*++=+=+++++==+++==",
"******++*+++++++++++++*####%%%%%#%#%%%%%%%##%###%#+###******+=+++=+++======",
"***+++++++++++++++++++##*%%%%%%%%#%%%%%#%%%##%%#****++##**+*+++=========++=",
"**+++++++++++++++++++#####%%%%%#%%%%%%%%%#%%%%%###***++++=++*+*+=======+===",
"++++++++++++++++++++%%#%##%%%%%%#%%%%%%%%%%%%#%###*+*+++++*+****+++========",
"+++++++++++++++++++**@%####%#%*%%%%%%#%#%#######%###*+*#++*+#+++==+=++=====",
"++++++++++++++++++%*#%%#%###%%%%%#%%@%%%%#######%###*++#*****+=++=+++======",
"+++++++++++++++++*#**#@%%%%%#%%%%%#%%%#%%######*####*+#+**++==+++++++===++=",
"++++++++++++++++=*#%%#@@@%###%%####%%####*#####*###**#**##++++*++=+========",
"++++++++++=+++===*#**#%@@*#%*#%%####%##%%*#*##****#****##+=+**+*++=========",
"==++=++====+==+===##*##%%%%########%##########*++######*++++*++*+++========",
"==================****#%@%%**###**#+*#######***+*######*++++****++===+=====",
"==================*###*#%%#%#*#********####**++*+*#*###******+++**=++=====+",
"========-=========#*****##%###*#*#**#***#**++******###********++*+=+=======",
"=======--==========#**#**#########*##**##*++**+*****#++++******+++++=======",
"------=-============#*****#####**####**+*+*+*+*++****++++++*****++++*=====+",
"----------==========-*#*#**###*#*****#*++=-*****+****+++++*****+++++++=++++",
"-----------------===-==+##****###******###+=++*++**#*+++++*+**+**+++*+=++++",
"----------------==-===++=*#****##******#%##+#+*******++++++**+*+++++*++++++",
"----------------====+=*+=+*#****#******#%%%%%+***+++++++++*++*+=*+++*+++++=",
"--------------=-=+====+++++#+**********%##*=****=+*++*++*++*++*=*+**+*+++++",
"--------=---======++++++++++++=*++***%*%%#*+=*=*++*+++++++++++++++++*++++++",
"-------=---=-==+==+++=++++=*+*++++++%%%**%%#*%+++++++++++++++++++++++*+++==",
"-------==-----=====++=+==+=++++++=+=*%%%#*###*+++=++=====+++=+++=+++++=+==+",
"--------------========+===+++++++==+%%%##%%#%*#%==+==+++=+++=+==+++++====+=",
"----------------====-======+++++++++%%%#%*+%##%+=========++++=++=+=++=++===",
"-:-------=-----===--=-=========++++#%@#@%*+*##%#=+=======++==+=========-===",
"------------------------==========#%%%@##%*++#*#%==========================",
"--------=-------------=----=======%@%-%%#%#@##*%%#-==========-==========-==",
"-----------------------------====##@+-%%#%@%%%%+%*=====-------====-=-==--=-",
"------------------------------===%%%=-%#%%%*%@%*%*#====---=----===---=-=---",
"===-=--------------:------------%#%---%%%#%%+@@++%*#--------=--=--=------=-",
"====---------------------------=#%---%@#%##@%@%%#=%*-----------=---------==",
"=-===---=----------------------+%---=%@%%##%#%%@%*=%*-------------=========",
"=====--------------------------#@--#=%@%%##%##%##%-%%--------====++========",
"-===-=-=-----------------------+@%#-#%%%%##%%*@@#%=%#--==========+=========",
"=======-=----------------------*@%#%#%%%####@#%%-%#@%======================",
"=========-=-----=------------=#*#%#-=%%#*#%#%%=%@-%#==*==========-=========",
"==========--======---------=**+=*==-=@%%##%#%%=%%=*#=#*%+=======--=========",
"======-=--======-----=--==-%+--=+=*-=#@@##%#%%*%##=**---*#==-==----========",
    };
    clearBuffer(); flushBuffer();

    int intro_h, intro_w;
    intro_w = sizeof(intro[0]);
    intro_h = sizeof(intro) / intro_w;

    show_image(intro, intro_h, intro_w);

    Sleep(1000);
    clearBuffer();
    flushBuffer();
}

void Outtro()
{
    char outtro[][75] = {
"***************************************************************************",
"***************************************************************************",
"**********........+*******.....****+....:=...+*****.....*............-*****",
"**********..........-*****.....****+....:=......***.....*............-*****",
"**********............****.....****=....:=........*.....*............-*****",
"**********..............**.....****=....:=..............*............-*****",
"**********.....**#......=*.....****+....:=..............*.....*************",
"**********.....****......*.....****+....:=....*.........*.....*************",
"**********.....*****.....#.....****+....:=....***.......*.....*************",
"**********.....*****-....=.....****+....:=....****......*..........********",
"#*********.....*****=....=.....****=....:=....****......*..........********",
"**********.....*****:....=.....****+....:=....*****.....*..........********",
"**********.....*****.....+.....****+....:=....*****.....*.....++***********",
"**********.....****:.....*.....****=....:=....*****.....*.....*************",
"**********.....***......=*-....-***.....==....*****.....*.....*************",
"**********.....:........**=.....:=:.....*=....*****.....*.....:::::::=*****",
"**********.............****.............*=....*****.....*............-*****",
"**********...........*******-.........+**=....*****.....*............-*****",
"**********........=**********+.......****=....*****.....*............-*****",
"********************************===***********************************+****",
"***************************************************************************"
    };

    int outtro_h, outtro_w;
    outtro_w = sizeof(outtro[0]);
    outtro_h = sizeof(outtro) / outtro_w;

    clearBuffer(); flushBuffer();
    show_image(outtro, outtro_h, outtro_w);
    Sleep(1000);
    clearBuffer();
    flushBuffer();
}
